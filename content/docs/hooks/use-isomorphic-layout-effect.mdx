---
title: useIsomorphicLayoutEffect
description: A custom hook that provides a cross-platform compatible useLayoutEffect.
---

## Installation

<CodeTabs>
  <TabsList>
    <TabsTrigger value="cli">CLI</TabsTrigger>
    <TabsTrigger value="manual">Manual</TabsTrigger>
  </TabsList>
  
  <TabsContent value="cli">
    ```package-install
    npx shadcn@latest add https://react-usekit.vercel.app/r/use-isomorphic-layout-effect.json
    ```
  </TabsContent>
  
  <TabsContent value="manual">
    Copy and paste the following code into your project.

    ```ts title="hooks/use-isomorphic-layout-effect.ts"
    import { useEffect, useLayoutEffect } from "react";

    /**
     * A custom hook that provides a cross-platform compatible `useLayoutEffect`.
     * It uses `useEffect` on the server and `useLayoutEffect` on the client.
     */
    export const useIsomorphicLayoutEffect =
      typeof window !== "undefined" ? useLayoutEffect : useEffect;
    ```

  </TabsContent>
</CodeTabs>

## Usage

```tsx
import { useIsomorphicLayoutEffect } from "@/hooks/useIsomorphicLayoutEffect";
import { useState, useRef } from "react";

function App() {
  const [dimensions, setDimensions] = useState({ width: 0, height: 0 });
  const elementRef = useRef<HTMLDivElement>(null);

  useIsomorphicLayoutEffect(() => {
    if (elementRef.current) {
      const { offsetWidth, offsetHeight } = elementRef.current;
      setDimensions({ width: offsetWidth, height: offsetHeight });
    }
  }, []);

  return (
    <div>
      <div
        ref={elementRef}
        style={{ padding: "20px", border: "1px solid #ccc" }}
      >
        This element is being measured
      </div>
      <p>
        Dimensions: {dimensions.width} x {dimensions.height}
      </p>
    </div>
  );
}
```

## API

### Parameters

| Parameter | Type                                | Description                           |
| --------- | ----------------------------------- | ------------------------------------- |
| `effect`  | `() => void \| (() => void)`        | The effect function to run            |
| `deps`    | `React.DependencyList \| undefined` | The dependencies array for the effect |

### Returns

This hook doesn't return anything.
